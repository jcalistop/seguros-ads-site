<!doctype html>
<html lang="{{ site.lang | default: 'es' }}">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      {% if page.title %}{{ page.title }} | {{ site.title }}{% else %}{{
      site.title }}{% endif %}
    </title>

    {% seo %}
    <link
      rel="icon"
      type="image/svg+xml"
      href="{{ '/assets/images/logo.svg' | relative_url }}"
    />

    <!-- ============================================================ GOOGLE ANALYTICS GA4 -->
    <!-- INSTRUCCIONES:
         1. Ve a https://analytics.google.com/ y crea una propiedad GA4
         2. Reemplaza G-XXXXXXXXXX con tu ID de medición real
         3. Elimina los comentarios HTML que rodean las etiquetas script
    -->
    <!--
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-XXXXXXXXXX');
    </script>
    -->

    <!-- ============================================================ META PIXEL (Facebook/Instagram) -->
    <!-- INSTRUCCIONES:
         1. Ve a https://business.facebook.com/events_manager
         2. Crea un pixel y copia el ID numérico
         3. Reemplaza XXXXXXXXXXXXXXX con tu Pixel ID real
         4. Elimina los comentarios HTML que rodean el script
    -->
    <!--
    <script>
      !function(f,b,e,v,n,t,s)
      {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)}(window, document,'script',
      'https://connect.facebook.net/en_US/fbevents.js');
      fbq('init', 'XXXXXXXXXXXXXXX');
      fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
      src="https://www.facebook.com/tr?id=XXXXXXXXXXXXXXX&ev=PageView&noscript=1"/></noscript>
    -->

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: {
                DEFAULT: "#1a56db",
                50: "#eff6ff",
                100: "#dbeafe",
                600: "#1a56db",
                700: "#1d4ed8",
                800: "#1e40af",
                900: "#1e3a8a",
              },
            },
            fontFamily: {
              sans: ["Inter", "system-ui", "sans-serif"],
            },
          },
        },
      };
    </script>

    <!-- Tabler Icons CDN -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/tabler-icons.min.css"
    />

    <!-- Inter Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <style>
      html {
        scroll-behavior: smooth;
      }
      .hero-bg {
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
      }
      .carousel-item {
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.7s ease-in-out;
      }
      .carousel-item.active {
        opacity: 1;
        pointer-events: auto;
      }
      .dropdown:hover .dropdown-menu,
      .dropdown:focus-within .dropdown-menu {
        display: block;
      }
      #mobile-menu {
        transition: transform 0.3s ease;
      }
    </style>

    {% if page.extra_css %}
    <link rel="stylesheet" href="{{ page.extra_css | relative_url }}" />
    {% endif %}

    <!-- ============================================================ SCHEMA STRUCTURED DATA -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "InsuranceAgency",
        "name": "ADS Corredores de Seguros",
        "url": "https://segurosads.cl",
        "logo": "https://segurosads.cl/assets/images/logo.svg",
        "image": "https://segurosads.cl/assets/images/logo.svg",
        "description": "{{ site.description | strip_newlines }}",
        "telephone": "+{{ site.data.social.whatsapp.number }}",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Punta Arenas",
          "addressRegion": "Magallanes",
          "addressCountry": "CL"
        },
        "geo": {
          "@type": "GeoCoordinates",
          "latitude": -53.1638,
          "longitude": -70.9171
        },
        "areaServed": {
          "@type": "GeoCircle",
          "geoMidpoint": {
            "@type": "GeoCoordinates",
            "latitude": -53.1638,
            "longitude": -70.9171
          },
          "geoRadius": "500000"
        },
        "foundingDate": "1979",
        "sameAs": [
          "https://www.instagram.com/ads_corredores",
          "https://www.facebook.com/adscorredores",
          "{{ site.data.social.whatsapp.url }}"
        ],
        "priceRange": "$$",
        "openingHoursSpecification": {
          "@type": "OpeningHoursSpecification",
          "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
          "opens": "09:00",
          "closes": "18:00"
        }
      }
    </script>
  </head>
  <body class="font-sans text-gray-800 bg-white flex flex-col min-h-screen">
    <!-- ============================================================ NAVBAR -->
    <header
      class="bg-primary-800 text-white shadow-lg sticky top-0 z-50"
      style="background-color: #1e40af"
    >
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">
          <!-- Logo + Nombre -->
          <a
            href="{{ '/' | relative_url }}"
            class="flex items-center gap-3 flex-shrink-0"
          >
            <img
              src="{{ '/assets/images/logo.svg' | relative_url }}"
              alt="ADS Corredores de Seguros"
              class="h-10 w-auto"
              onerror="this.style.display = 'none'"
            />
            <span class="font-semibold text-lg leading-tight hidden sm:block">
              ADS Corredores de Seguros
            </span>
          </a>

          <!-- Menú Desktop -->
          <nav class="hidden lg:flex items-center gap-1">
            <a
              href="{{ '/' | relative_url }}"
              class="px-3 py-2 rounded text-sm font-medium hover:bg-blue-700 transition {% if page.url == '/' %}bg-blue-700{% endif %}"
            >
              Inicio
            </a>
            <a
              href="{{ '/nosotros' | relative_url }}"
              class="px-3 py-2 rounded text-sm font-medium hover:bg-blue-700 transition {% if page.url contains '/nosotros' %}bg-blue-700{% endif %}"
            >
              Nosotros
            </a>

            <!-- Dropdown Seguros -->
            <div class="relative dropdown">
              <button
                class="flex items-center gap-1 px-3 py-2 rounded text-sm font-medium hover:bg-blue-700 transition {% if page.url contains '/seguros' %}bg-blue-700{% endif %}"
              >
                <i class="ti ti-shield-lock-filled mr-1"></i>Seguros
                <i class="ti ti-chevron-down text-xs ml-1"></i>
              </button>
              <div
                class="dropdown-menu absolute left-0 mt-1 w-60 bg-white rounded-lg shadow-xl py-1 hidden z-50"
              >
                {% for cat in site.data.insurance_categories %}
                <a
                  href="{{ cat.slug | prepend: '/' | relative_url }}"
                  class="flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-700 transition"
                >
                  <i class="{{ cat.icon }}"></i>{{ cat.name }}
                </a>
                {% endfor %}
              </div>
            </div>

            <a
              href="{{ '/pagar' | relative_url }}"
              class="px-3 py-2 rounded text-sm font-medium hover:bg-blue-700 transition {% if page.url contains '/pagar' %}bg-blue-700{% endif %}"
            >
              <i class="ti ti-credit-card-filled mr-1"></i>Paga aquí
            </a>
            <a
              href="{{ '/contacto' | relative_url }}"
              class="px-3 py-2 rounded text-sm font-medium hover:bg-blue-700 transition {% if page.url contains '/contacto' %}bg-blue-700{% endif %}"
            >
              Contacto
            </a>
          </nav>

          <!-- WhatsApp Desktop -->
          <a
            href="{{ site.data.social.whatsapp.url }}?text={{ 'Hola, me interesa cotizar un seguro' | url_encode }}"
            target="_blank"
            rel="noopener"
            class="hidden lg:flex items-center gap-2 bg-green-500 hover:bg-green-600 text-white text-sm font-medium px-3 py-2 rounded transition"
          >
            <i class="ti ti-brand-whatsapp"></i>
            <span>{{ site.data.social.whatsapp.display }}</span>
          </a>

          <!-- Botón hamburguesa móvil -->
          <button
            id="mobile-toggle"
            aria-label="Abrir menú"
            class="lg:hidden p-2 rounded hover:bg-blue-700 transition"
          >
            <i class="ti ti-menu-2 text-2xl"></i>
          </button>
        </div>
      </div>
    </header>

    <!-- ============================================================ MENÚ MÓVIL -->
    <div
      id="mobile-overlay"
      class="fixed inset-0 bg-black/50 z-40 hidden lg:hidden"
      onclick="closeMobileMenu()"
    ></div>

    <aside
      id="mobile-menu"
      class="fixed top-0 left-0 h-full w-72 text-white z-50 transform -translate-x-full lg:hidden overflow-y-auto"
      style="background-color: #1e3a8a"
    >
      <div
        class="flex items-center justify-between p-4 border-b border-blue-800"
      >
        <span class="font-semibold">ADS Corredores</span>
        <button onclick="closeMobileMenu()" aria-label="Cerrar menú">
          <i class="ti ti-x text-xl"></i>
        </button>
      </div>
      <nav class="p-4 space-y-1">
        <a
          href="{{ '/' | relative_url }}"
          class="flex items-center gap-2 px-3 py-2 rounded hover:bg-blue-800 transition"
        >
          <i class="ti ti-home"></i> Inicio
        </a>
        <a
          href="{{ '/nosotros' | relative_url }}"
          class="flex items-center gap-2 px-3 py-2 rounded hover:bg-blue-800 transition"
        >
          <i class="ti ti-star-filled"></i> Nosotros
        </a>
        <!-- Seguros colapsable -->
        <div>
          <button
            onclick="toggleSegurosMenu()"
            class="w-full flex items-center justify-between px-3 py-2 rounded hover:bg-blue-800 transition"
          >
            <span class="flex items-center gap-2"
              ><i class="ti ti-shield-lock-filled"></i> Seguros</span
            >
            <i
              id="seguros-chevron"
              class="ti ti-chevron-down text-xs transition-transform"
            ></i>
          </button>
          <div id="seguros-submenu" class="hidden pl-4 space-y-1 mt-1">
            {% for cat in site.data.insurance_categories %}
            <a
              href="{{ cat.slug | prepend: '/' | relative_url }}"
              class="flex items-center gap-2 px-3 py-2 rounded hover:bg-blue-800 transition text-sm"
            >
              <i class="{{ cat.icon }}"></i> {{ cat.name }}
            </a>
            {% endfor %}
          </div>
        </div>
        <a
          href="{{ '/pagar' | relative_url }}"
          class="flex items-center gap-2 px-3 py-2 rounded hover:bg-blue-800 transition"
        >
          <i class="ti ti-credit-card-filled"></i> Paga aquí
        </a>
        <a
          href="{{ '/contacto' | relative_url }}"
          class="flex items-center gap-2 px-3 py-2 rounded hover:bg-blue-800 transition"
        >
          <i class="ti ti-mail"></i> Contacto
        </a>
        <div class="pt-3 border-t border-blue-800">
          <a
            href="{{ site.data.social.whatsapp.url }}?text={{ 'Hola, me interesa cotizar un seguro' | url_encode }}"
            target="_blank"
            rel="noopener"
            class="flex items-center gap-2 px-3 py-2 rounded bg-green-500 hover:bg-green-600 transition text-sm"
          >
            <i class="ti ti-brand-whatsapp"></i> {{
            site.data.social.whatsapp.display }}
          </a>
        </div>
      </nav>
    </aside>

    <!-- ============================================================ CONTENIDO PRINCIPAL -->
    <main class="flex-1">{{ content }}</main>

    {% include footer.html %}

    <!-- ============================================================ SCRIPTS -->
    <script>
      // Menú móvil
      document
        .getElementById("mobile-toggle")
        .addEventListener("click", function () {
          const menu = document.getElementById("mobile-menu");
          menu.style.transform = "translateX(0)";
          document.getElementById("mobile-overlay").classList.remove("hidden");
        });
      function closeMobileMenu() {
        document.getElementById("mobile-menu").style.transform =
          "translateX(-100%)";
        document.getElementById("mobile-overlay").classList.add("hidden");
      }
      // Submenú de seguros en móvil
      function toggleSegurosMenu() {
        const sub = document.getElementById("seguros-submenu");
        const chev = document.getElementById("seguros-chevron");
        sub.classList.toggle("hidden");
        chev.style.transform = sub.classList.contains("hidden")
          ? ""
          : "rotate(180deg)";
      }
    </script>

    {% if page.extra_js %}
    <script src="{{ page.extra_js | relative_url }}"></script>
    {% endif %}

    <!-- ============================================================ CHAT (tawk.to) -->
    <!--
      Reemplazo del botón flotante de WhatsApp por el widget de tawk.to.

      Dónde pegar el script: pega el código de embed de tawk.to (proporcionado
      por tawk.to tras crear la propiedad) dentro del bloque de ejemplo
      comentado a continuación o añadiendo el valor en `_data/tawk.yml`.

      Ejemplo (comentar/descomentar según prefieras):

      1) Crear `_data/tawk.yml` con:
         property: "PROPID/default"

      2) El snippet real se insertará automáticamente si existe
         `site.data.tawk.property`.

      Ejemplo de script (DESCOMENTAR y reemplazar PROPID/default):

      <script type="text/javascript">
      var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
      (function(){
        var s1=document.createElement("script"), s0=document.getElementsByTagName("script")[0];
        s1.async=true;
        s1.src='https://embed.tawk.to/PROPID/default';
        s1.charset='UTF-8';
        s1.setAttribute('crossorigin','*');
        s0.parentNode.insertBefore(s1,s0);
      })();
      </script>

    -->

    {% if site.data.tawk and site.data.tawk.property %}
    <script type="text/javascript">
      var Tawk_API = Tawk_API || {},
        Tawk_LoadStart = new Date();
      (function () {
        var s1 = document.createElement("script"),
          s0 = document.getElementsByTagName("script")[0];
        s1.async = true;
        s1.src = "https://embed.tawk.to/{{ site.data.tawk.property }}";
        s1.charset = "UTF-8";
        s1.setAttribute("crossorigin", "*");
        s0.parentNode.insertBefore(s1, s0);
      })();
    </script>
    {% endif %}
  </body>
</html>
